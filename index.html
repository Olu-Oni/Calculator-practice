<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>My Calculator</title>
        <meta name="Developer" content="Oni Oluwole">
        <meta name="description" content="A Simple Calculator App">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="CalcStyle.css">
    </head>
    <body>
        <div id="container">

            <h1><strong>Simple Calculator</strong></h1>
            <form>
                <input type="text" pattern="[0-9\W]*" id="display" readonly>
                <div>
                    <input type="button"  class="buttons" value="AC" onclick="clearAll()">
                    <input type="button" class="buttons" value="DEL" onclick="del()">
                    <input type="button" class="buttons" value="." onclick="getNum(value)">
                    <input type="button" class="buttons" value="/" onclick="getOp(value)">
                </div>

                <div>
                    <input type="button" class="buttons" value="7" onclick="getNum(value)">
                    <input type="button" class="buttons" value="8" onclick="getNum(value)">
                    <input type="button" class="buttons" value="9" onclick="getNum(value)">
                    <input type="button" class="buttons" value="*" onclick="getOp(value)">
                </div>

                <div>
                    <input type="button" class="buttons" value="4" onclick="getNum(value)">
                    <input type="button" class="buttons" value="5" onclick="getNum(value)">
                    <input type="button" class="buttons" value="6" onclick="getNum(value)">   
                    <input type="button" class="buttons" value="-" onclick="getOp(value)">
                </div>

                <div>
                    <input type="button" class="buttons" value="1" onclick="getNum(value)">
                    <input type="button" class="buttons" value="2" onclick="getNum(value)">
                    <input type="button" class="buttons" value="3" onclick="getNum(value)">
                    <input type="button" class="buttons" value="+" onclick="getOp(value)">
                </div>

                <div>
                    <input type="button" class="buttons" value="00" onclick="getNum(value)">
                    <input type="button" class="buttons" value="0" onclick="getNum(value)">
                    <input type="button" class="buttons equal" value="=" onclick="getAns()">                 
                </div>
            </form>
            
        <div id="footer">
            <p>&copy;<em> Oni Oluwole </em></p>
        </div>
        </div>

        
        
        <script>
            
        
            let firstNumber = ''
            let secondNumber = ''
            let step = 0;
            let operator = ""
            let result =""

            let array1 = []
            let array2 = []
            let display = document.getElementById("display")
             
            

            function getNum(val){

                if(step===0 || step ===1){
                    if(result != ""){
/*Clear All values when a number is inputed after a result has already been given before */
                        display.value="" 
                        firstNumber = ""
                        array1 = []
                        secondNumber = ""
                        array2 = []
                        result = ""

                        console.log("\nOVERWRITE..... ")
                        console.log("Display: " + display.value)
                        console.log("First Num: " + firstNumber)
                        console.log("Second Num: " + secondNumber)
                        console.log("Result: " + result)
                        console.log("Operator: " + operator)
                        console.log("Step: " + (step +1))
                        }

                        display.value += val;
                        array1.push(val) 
                        firstNumber = array1.join('')
                        step = 1
                    
                }
                else if(step===2 || step===3){
                    
                    if(array2.length === 0){
                        display.value += " "
                    }
                    display.value += val;
                    array2.push(val)  
                    step =3  
                }   
            }

            function getOp(op){
                if((op === "-" ||op === "+") && step ===0 && firstNumber === ""){
                    firstNumber = op
                    step = 1
                    console.log("\nOVERWRITE..... ")
                        console.log("Display: " + display.value)
                        console.log("First Num: " + firstNumber)
                        console.log("Second Num: " + secondNumber)
                        console.log("Result: " + result)
                        console.log("Operator: " + operator)
                        console.log("Step: " + step)
                }

                if(step===3 ){
                getAns()
                }
                if(step ===0 && result != ""){
                    firstNumber =result 
                    display.value = firstNumber + " " + op ;
                    operator = op
                    
                    step = 2  
                }

                else if((step===1 || step ===2 ) && firstNumber != ""){
                    
                    firstNumber = array1.join('')
                    display.value = firstNumber + " " + op ;
                    operator = op
                    
                    step = 2
                }
                

            
            }
            function del(){
                display.value=display.value.slice(0,-1)
                if(step ===1){      //deleting the first number
                    array1.pop()
                    firstNumber =  Number(firstNumber.toString().slice(0,-1))
                    console.log("\nLength of 1st num:  " + array1.length)
                    
                    if(array1.length === 0){
                        step = 0   
                    }
                }

                else if(step===3){       //deleting the second number
                    array2.pop()

                    console.log("\nLength of 2nd num:  " + array2.length)
                    
                    if(array2.length === 0){
                        step = 2
                        display.value=display.value.slice(0,-1)
                    }
                }

                else if(step===2){       //deleting the operator (and adding back the space)
                    display.value=display.value.slice(0,-1)
                    operator = operator.slice(0,-1)
                    step =1
                }

                console.log("\nDELETED.... ")
                    console.log("Display: " + display.value)
                    console.log("First Num: " + firstNumber)
                    console.log("Second Num: " + secondNumber)
                    console.log("Result: " + result)
                    console.log("Operator: " + operator)
                    console.log("Step: " + step)

            }

            function clearAll(){
                display.value=""
                firstNumber = ""
                array1 = []
                SecondNumber = ""
                array2 = []
                result = ""
                step =0
                operator = ""

                    console.log("\nCLEAR ALL.... ")
                    console.log("Display: " + display.value)
                    console.log("First Num: " + firstNumber)
                    console.log("Second Num: " + secondNumber)
                    console.log("Result: " + result)
                    console.log("Operator: " + operator)
                    console.log("Step: " + step)
            }


            function getAns(){
                if(step===3 || step === 1 ){
                    secondNumber = array2.join('')   
                    switch(operator){
                        
                        case "":
                            result = firstNumber
                        //    console.log(firstNumber)
                        break;
                        case "/":
                            result = Number(firstNumber) / Number(secondNumber)
                        break;

                        case "*":
                            
                            result = Number(firstNumber) * Number(secondNumber)
                        if(result.toString().includes("."))
                        result = result.toFixed(4)
                        break;

                        case "+":
                        result = Number(firstNumber) + Number(secondNumber)
                        break;

                        case "-":
                            result = firstNumber - secondNumber

                            
                        break;
                        default:
                        result = "Error"

                    }
                    if(result.toString().includes(".")){
                        result = result.toFixed(4)
                    }
                    /*
                    if(result.toString().length > 15){
                        result = result.toFixed(4)
                    }
                    */
                    display.value = result
                    array1 = []
                    
                    SecondNumber = ""
                    array2 = []

                    step =0
                    console.log("\nEQUALS.... ")
                    console.log("Display: " + display.value)
                    console.log("First Num: " + firstNumber)
                    console.log("Second Num: " + secondNumber)
                    console.log("Result: " + result)
                    console.log("Operator: " + operator)
                    console.log("Step: " + step)
                    /*
                    display.value = firstnumber + " " + op ;
                    operator = op
                    console.log()
                    step = 2
                    */
                }
            
            }
            
        
        
        </script>
    </body>
</html>
